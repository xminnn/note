<!DOCTYPE html>
<html lang="zh" οndragstart="return false;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>c++右值引用</title>
    <link rel="stylesheet" href="../index.css" cache="force">
</head>

<body οndragstart="return false;">
    <div style="position: fixed; left: 0; top: 0; width: 100%; height: 100%; padding: 0;">
        <div class="left-container">
            <div class="header-container">
                <a href="https://github.com/xminnn"><img src="../icon.jpg" cache="force"></a>
            </div>
            <div id="dir-container">
                <div class="node-dir">
<div class="node-dir-name">c++</div>
<div class="node-children">
<div class="node-item">
<div id="article-1745078040871" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040871.html">代码静态检测工具</a>
</div>
</div>
<div class="node-item">
<div id="article-1" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1.html">共享内存</a>
</div>
</div>
<div class="node-item">
<div id="article-2" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./2.html">开源项目</a>
</div>
</div>
<div class="node-item">
<div id="article-3" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./3.html">开源游戏引擎以及工具</a>
</div>
</div>
<div class="node-item">
<div id="article-10" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./10.html">推荐文章</a>
</div>
</div>
<div class="node-item">
<div id="article-4" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./4.html">性能分析</a>
</div>
</div>
<div class="node-item">
<div id="article-7" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./7.html">c++基础总结</a>
</div>
</div>
<div class="node-item">
<div id="article-8" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./8.html">c++模板的偏特化与全特化</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040863" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040863.html">c++模板元编程</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040864" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040864.html">c++虚表的内存结构</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040862" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040862.html">c++右值引用</a>
</div>
</div>
<div class="node-item">
<div id="article-5" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./5.html">fopen</a>
</div>
</div>
<div class="node-item">
<div id="article-6" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./6.html">icmp实现ping</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078880027" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078880027.html">Makefile</a>
</div>
</div>
<div class="node-item">
<div id="article-9" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./9.html">mmap</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040869" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040869.html">opengl积雪效果</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040867" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040867.html">opengl卡通着色器</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040868" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040868.html">opengl特效</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040866" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040866.html">opengl下雨效果</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040870" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040870.html">tcp抓包</a>
</div>
</div>
</div>
</div>
<div class="node-dir">
<div class="node-dir-name">linux</div>
<div class="node-children">
<div class="node-item">
<div id="article-11" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./11.html">常见问题</a>
</div>
</div>
<div class="node-item">
<div id="article-12" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./12.html">常用命令</a>
</div>
</div>
<div class="node-item">
<div id="article-13" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./13.html">代理</a>
</div>
</div>
<div class="node-item">
<div id="article-21" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./21.html">镜像源</a>
</div>
</div>
<div class="node-item">
<div id="article-20" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./20.html">配置网络</a>
</div>
</div>
<div class="node-item">
<div id="article-22" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./22.html">设置core文件</a>
</div>
</div>
<div class="node-item">
<div id="article-14" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./14.html">用户与权限</a>
</div>
</div>
<div class="node-item">
<div id="article-15" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./15.html">dns修改</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040872" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040872.html">proot</a>
</div>
</div>
<div class="node-item">
<div id="article-16" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./16.html">qemu</a>
</div>
</div>
<div class="node-item">
<div id="article-17" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./17.html">ssh穿透</a>
</div>
</div>
<div class="node-item">
<div id="article-18" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./18.html">surfacebook2安装archlinux记录</a>
</div>
</div>
<div class="node-item">
<div id="article-19" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./19.html">systemctl守护自定义程序</a>
</div>
</div>
</div>
</div>
<div class="node-dir">
<div class="node-dir-name">服务</div>
<div class="node-children">
<div class="node-item">
<div id="article-27" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./27.html">elasticsearch</a>
</div>
</div>
<div class="node-item">
<div id="article-26" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./26.html">kafka</a>
</div>
</div>
<div class="node-item">
<div id="article-25" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./25.html">mongo</a>
</div>
</div>
<div class="node-item">
<div id="article-24" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./24.html">mysql</a>
</div>
</div>
<div class="node-item">
<div id="article-23" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./23.html">redis</a>
</div>
</div>
</div>
</div>
<div class="node-dir">
<div class="node-dir-name">架构</div>
<div class="node-children">
<div class="node-item">
<div id="article-29" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./29.html">游戏任务系统</a>
</div>
</div>
</div>
</div>
<div class="node-dir">
<div class="node-dir-name">算法</div>
<div class="node-children">
<div class="node-item">
<div id="article-30" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./30.html">查找算法</a>
</div>
</div>
<div class="node-item">
<div id="article-35" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./35.html">调度算法</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040877" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040877.html">动态规划</a>
</div>
</div>
<div class="node-item">
<div id="article-42" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./42.html">二叉树</a>
</div>
</div>
<div class="node-item">
<div id="article-34" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./34.html">缓存淘汰算法</a>
</div>
</div>
<div class="node-item">
<div id="article-36" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./36.html">加密算法</a>
</div>
</div>
<div class="node-item">
<div id="article-45" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./45.html">链表</a>
</div>
</div>
<div class="node-item">
<div id="article-31" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./31.html">排序算法</a>
</div>
</div>
<div class="node-item">
<div id="article-44" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./44.html">其他常见算法题</a>
</div>
</div>
<div class="node-item">
<div id="article-33" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./33.html">时间轮</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040879" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040879.html">算法思想</a>
</div>
</div>
<div class="node-item">
<div id="article-32" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./32.html">跳表</a>
</div>
</div>
<div class="node-item">
<div id="article-37" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./37.html">寻路算法</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040878" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040878.html">游戏开发中的噪声算法</a>
</div>
</div>
<div class="node-item">
<div id="article-43" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./43.html">栈和队列</a>
</div>
</div>
<div class="node-item">
<div id="article-38" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./38.html">正太分布随机数算法</a>
</div>
</div>
<div class="node-item">
<div id="article-39" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./39.html">huffman压缩算法</a>
</div>
</div>
<div class="node-item">
<div id="article-40" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./40.html">lz77压缩算法</a>
</div>
</div>
<div class="node-item">
<div id="article-41" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./41.html">md5算法</a>
</div>
</div>
</div>
</div>
<div class="node-dir">
<div class="node-dir-name">工具</div>
<div class="node-children">
<div class="node-item">
<div id="article-51" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./51.html">软媒工具组件精选</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040876" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040876.html">网址大全</a>
</div>
</div>
<div class="node-item">
<div id="article-49" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./49.html">ai对话</a>
</div>
</div>
<div class="node-item">
<div id="article-50" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./50.html">ai绘画</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040874" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040874.html">blender</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040875" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040875.html">docker</a>
</div>
</div>
<div class="node-item">
<div id="article-47" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./47.html">git</a>
</div>
</div>
<div class="node-item">
<div id="article-48" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./48.html">svn</a>
</div>
</div>
<div class="node-item">
<div id="article-53" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./53.html">vim</a>
</div>
</div>
<div class="node-item">
<div id="article-46" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./46.html">vscode</a>
</div>
</div>
<div class="node-item">
<div id="article-52" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./52.html">winfsp</a>
</div>
</div>
</div>
</div>
<div class="node-dir">
<div class="node-dir-name">其他</div>
<div class="node-children">
<div class="node-item">
<div id="article-56" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./56.html">开源协议</a>
</div>
</div>
<div class="node-item">
<div id="article-57" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./57.html">终端输出特殊代码</a>
</div>
</div>
<div class="node-item">
<div id="article-1745078040873" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./1745078040873.html">Android开发环境快速搭建</a>
</div>
</div>
<div class="node-item">
<div id="article-55" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./55.html">python简单日志工具</a>
</div>
</div>
<div class="node-item">
<div id="article-58" class="node-one">
<div class="tab_1"></div>
<a clas="node-name" href="./58.html">windows相关</a>
</div>
</div>
</div>
</div>

            </div>
        </div>
        <div class="right-container">
            <div id="md-container">
                <div class="title"> c++右值引用 </div>
                <div class="info">
                    <div class="create_time">创建:2025-04-19 21:33</div>
                    <div class="update_time">更新:2025-04-19 21:33</div>
                </div>
                <div class="line"></div>

                <div id="md-container-content" style="position: relative;"><p>在 C++ 中，什么是移动语义和右值引用，它们有什么作用？</p>
<p>在 C++ 中，移动语义和右值引用是 C++11 引入的重要特性，它们主要用于提高程序的性能，尤其是在处理资源管理和对象的复制与移动操作时。下面详细介绍它们的概念和作用。</p>
<h3 id="">右值引用</h3>
<h4 id="-1">概念</h4>
<p>右值引用是一种新的引用类型，用于绑定到右值。在 C++ 中，表达式可以分为左值（lvalue）和右值（rvalue）。左值是可以取地址、有持久存储位置的表达式，通常是变量；而右值是不能取地址、没有持久存储位置的临时对象或字面量。右值引用使用两个 <code>&amp;&amp;</code> 来声明，语法形式为 <code>Type&amp;&amp;</code>。</p>
<h4 id="-2">示例代码</h4>
<pre><code class="cpp language-cpp">#include &lt;iostream&gt;

int main() {
    int x = 10;  // x 是左值
    // int&amp;&amp; rref = x;  // 错误：右值引用不能绑定到左值
    int&amp;&amp; rref = 20;  // 正确：右值引用绑定到右值
    std::cout &lt;&lt; "rref: " &lt;&lt; rref &lt;&lt; std::endl;
    return 0;
}
</code></pre>
<p>在上述代码中，<code>20</code> 是右值，可以被右值引用 <code>rref</code> 绑定，而左值 <code>x</code> 不能被右值引用绑定。</p>
<h3 id="-3">移动语义</h3>
<h4 id="-4">概念</h4>
<p>移动语义是一种允许资源（如动态分配的内存）从一个对象“移动”到另一个对象的机制，而不是进行昂贵的复制操作。当一个对象是临时对象（右值）时，我们可以直接将其资源所有权转移给另一个对象，避免不必要的内存分配和数据复制。移动语义主要通过移动构造函数和移动赋值运算符来实现。</p>
<h4 id="-5">示例代码</h4>
<pre><code class="cpp language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;

class MyString {
private:
    char* data;
    size_t length;

public:
    // 构造函数
    MyString(const char* str = "") {
        length = strlen(str);
        data = new char[length + 1];
        strcpy(data, str);
    }

    // 析构函数
    ~MyString() {
        delete[] data;
    }

    // 复制构造函数
    MyString(const MyString&amp; other) {
        length = other.length;
        data = new char[length + 1];
        strcpy(data, other.data);
    }

    // 移动构造函数
    MyString(MyString&amp;&amp; other) noexcept {
        length = other.length;
        data = other.data;
        other.length = 0;
        other.data = nullptr;
    }

    // 打印字符串
    void print() const {
        std::cout &lt;&lt; data &lt;&lt; std::endl;
    }
};

int main() {
    MyString str1("Hello");
    MyString str2 = std::move(MyString("World"));  // 使用移动构造函数
    str2.print();
    return 0;
}
</code></pre>
<p>在上述代码中，<code>MyString</code> 类定义了移动构造函数 <code>MyString(MyString&amp;&amp; other) noexcept</code>。当使用 <code>std::move</code> 将一个临时对象（右值）传递给构造函数时，会调用移动构造函数，直接将临时对象的资源所有权转移给新对象，避免了复制操作。</p>
<h3 id="-6">作用</h3>
<ul>
<li><strong>提高性能</strong>：移动语义可以避免不必要的复制操作，尤其是在处理大型对象或容器时，能够显著提高程序的性能。例如，在 <code>std::vector</code> 中插入元素时，如果使用移动语义，可以避免多次数据复制。</li>
<li><strong>资源管理</strong>：移动语义允许对象之间安全地转移资源所有权，避免资源泄漏。在移动操作后，原对象会放弃对资源的所有权，确保资源的正确释放。</li>
<li><strong>支持完美转发</strong>：右值引用是实现完美转发的基础，通过 <code>std::forward</code> 可以将参数以原始的左值或右值属性传递给其他函数，避免不必要的复制。</li>
</ul>
<p>完美转发（Perfect Forwarding）是 C++11 引入的一个重要特性，它允许我们编写一个函数模板，该模板可以将其参数以原始的值类别（左值或右值）和常量性（const 或非 const）准确无误地传递给另一个函数，而不会产生额外的复制或移动操作。下面从概念、实现机制和示例代码等方面详细介绍完美转发。</p>
<h3 id="-7">概念</h3>
<p>在 C++ 中，当我们将参数传递给函数时，参数的值类别（左值或右值）可能会丢失。例如，一个函数接收到一个右值参数，但在函数内部，这个参数会变成一个左值（因为它有了名字）。完美转发的目的就是解决这个问题，确保在函数调用链中，参数的值类别和常量性能够保持不变。</p>
<h3 id="-8">实现机制</h3>
<p>完美转发主要通过右值引用和 <code>std::forward</code> 函数来实现：</p>
<ul>
<li><strong>右值引用</strong>：用于区分左值和右值参数。在函数模板中，使用万能引用（也称为转发引用）<code>T&amp;&amp;</code> 来接收参数，它可以绑定到左值和右值。</li>
<li><strong><code>std::forward</code></strong>：这是一个标准库函数模板，用于在转发参数时保持其原始的值类别。它会根据传入的参数类型，将参数以左值或右值的形式转发给目标函数。</li>
</ul>
<h3 id="-9">示例代码</h3>
<pre><code class="cpp language-cpp">#include &lt;iostream&gt;
#include &lt;utility&gt;

// 目标函数，用于打印参数
void printValue(int&amp; value) {
    std::cout &lt;&lt; "Lvalue: " &lt;&lt; value &lt;&lt; std::endl;
}

void printValue(int&amp;&amp; value) {
    std::cout &lt;&lt; "Rvalue: " &lt;&lt; value &lt;&lt; std::endl;
}

// 转发函数模板
template&lt;typename T&gt;
void forwardValue(T&amp;&amp; arg) {
    printValue(std::forward&lt;T&gt;(arg));
}

int main() {
    int x = 10;
    // 传递左值
    forwardValue(x);
    // 传递右值
    forwardValue(20);
    return 0;
}
</code></pre>
<h3 id="-10">代码解释</h3>
<ol>
<li><strong>目标函数</strong>：<code>printValue</code> 函数有两个重载版本，分别接受左值引用和右值引用作为参数。当传入左值时，调用接受左值引用的版本；当传入右值时，调用接受右值引用的版本。</li>
<li><strong>转发函数模板</strong>：<code>forwardValue</code> 是一个函数模板，使用万能引用 <code>T&amp;&amp;</code> 来接收参数。在函数内部，使用 <code>std::forward&lt;T&gt;(arg)</code> 将参数以原始的值类别转发给 <code>printValue</code> 函数。</li>
<li><strong>主函数</strong>：在 <code>main</code> 函数中，我们分别传递一个左值 <code>x</code> 和一个右值 <code>20</code> 给 <code>forwardValue</code> 函数。通过完美转发，<code>printValue</code> 函数能够正确区分左值和右值参数。</li>
</ol>
<h3 id="-11">总结</h3>
<p>完美转发在编写通用库和模板代码时非常有用，它可以避免不必要的复制和移动操作，提高程序的性能。同时，它使得函数调用链中的参数传递更加灵活和高效。</p>
<p>完美转发的意义是多方面的，不仅仅局限于函数重载和高性能，下面详细阐述其主要意义：</p>
<h3 id="-12">保持参数原始属性</h3>
<ul>
<li><strong>值类别和常量性的保留</strong>：在 C++ 里，当参数传递给一个函数后，其原始的值类别（左值或右值）和常量性（<code>const</code> 或非 <code>const</code>）可能会丢失。例如，即使一个函数接收到的是右值参数，在函数内部这个参数因为有了名字而成为左值。完美转发利用右值引用和 <code>std::forward</code> 函数，可以确保参数在传递过程中，其原始的值类别和常量性不发生改变。这意味着我们能够将参数以最初传入时的状态准确无误地传递给其他函数。</li>
<li><strong>示例场景</strong>：在实现一个通用的函数包装器时，需要把接收到的参数原封不动地传递给被包装的函数。完美转发可以保证被包装函数接收到的参数和最初调用包装器时传入的参数具有相同的属性。</li>
</ul>
<h3 id="-13">避免不必要的复制和移动操作</h3>
<ul>
<li><strong>提高性能</strong>：在处理大型对象或者资源密集型对象时，复制操作会带来显著的性能开销。完美转发允许直接将右值参数以右值的形式传递给目标函数，从而可以调用移动构造函数或移动赋值运算符，避免了昂贵的复制操作。这样一来，程序在运行过程中可以减少内存分配和数据复制的次数，进而提升整体性能。</li>
<li><strong>示例场景</strong>：在实现一个容器类的插入函数时，如果使用完美转发，当插入的是临时对象（右值）时，就可以直接移动该对象到容器中，而不是进行复制。</li>
</ul>
<h3 id="-14">实现通用的函数适配器和包装器</h3>
<ul>
<li><strong>代码复用和灵活性</strong>：在编写通用的函数适配器、包装器或者代理函数时，完美转发能够让这些组件以一种透明的方式工作。也就是说，这些组件可以接收任意类型的参数，并将它们正确地转发给目标函数，而不需要为不同类型和值类别的参数编写大量的重载函数。这大大提高了代码的复用性和灵活性，使得我们可以编写更加通用和高效的代码。</li>
<li><strong>示例场景</strong>：标准库中的 <code>std::bind</code> 和 <code>std::thread</code> 等工具都使用了完美转发技术，它们可以接收任意数量和类型的参数，并将这些参数正确地传递给绑定的函数或线程函数。</li>
</ul>
<h3 id="-15">支持泛型编程</h3>
<ul>
<li><strong>编写通用算法和数据结构</strong>：在泛型编程中，我们经常需要编写能够处理各种类型和值类别的代码。完美转发使得我们可以编写出更加通用的算法和数据结构，这些代码可以无缝地处理左值和右值参数，而不需要为不同的值类别进行特殊处理。这增强了代码的通用性和可扩展性，使得泛型代码能够更加高效地处理各种情况。</li>
<li><strong>示例场景</strong>：实现一个通用的排序算法，该算法可以接收不同类型的容器和比较函数，并且能够正确处理容器中的左值和右值元素。</li>
</ul>
<p>综上所述，完美转发在 C++ 中具有重要的意义，它通过保持参数的原始属性、避免不必要的复制和移动、支持通用组件的实现以及增强泛型编程的能力，提高了代码的性能、复用性和灵活性。 </p></div>
            </div>
        </div>
    </div>

    <script>
        let scrollTop = window.localStorage.getItem('scrollTop');
        let container = document.getElementById("dir-container");
        if (scrollTop) {
            container.scrollTop = scrollTop;
        } else {
            let id = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1);
            id = id.substring(0, id.length - 5);
            if (id != "index") {
                const autoScoll = function (element, root) {
                    element.scrollIntoView({
                        behavior: "smooth",
                        block: "nearest"
                    });
                };
                console.log(`articles-${id}`);
                autoScoll(document.getElementById(`article-${id}`), container);
            }
        }
        window.onbeforeunload = function () {
            window.localStorage.setItem('scrollTop', container.scrollTop);
        };
    </script>

    <link rel="stylesheet" href="../third/pace-theme-minimal.tmpl.css" cache="force">
    <link rel="stylesheet" href="../third/atom-one-dark.css" cache="force">
    <script data-pace-options='{ "ajax": false }' src="../third/pace.js" cache="force"></script>
    <script src="../third/highlight.pack.js" cache="force"></script>

    <script>
        let mdContainer = document.getElementById("md-container");
        mdContainer.querySelectorAll("pre code");
        hljs.initHighlightingOnLoad();
        for (const it of mdContainer.querySelectorAll("pre code")) {
            hljs.highlightBlock(it);
        }

        //点击查看原图
        for (const img of document.querySelectorAll("#md-container img")) {
            img.onclick = function () {
                console.log("click");
                let newDiv = document.createElement('div');
                newDiv.setAttribute("class", "img-view-bkg");

                let hitDiv = document.createElement('div');
                hitDiv.setAttribute("class", "img-view-hint");
                hitDiv.innerHTML = "双击图片或者点击空白处取消图片查看";

                let newImg = document.createElement('img');
                newImg.setAttribute("class", "img-view-img");
                newImg.src = this.src;

                let newSpan = document.createElement("div");
                newSpan.setAttribute("class", "img-view");
                newSpan.appendChild(newDiv);
                newSpan.appendChild(newImg);
                newSpan.appendChild(hitDiv);
                document.body.appendChild(newSpan);

                newImg.ondblclick = function () {
                    document.body.removeChild(newSpan);
                };

                newDiv.onclick = function () {
                    document.body.removeChild(newSpan);
                };
            };
        }

        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            chtml: {
                displayAlign: 'left'
            }
        };
        let oldOnLoad = window.onload;
        window.onload = () => {
            let spt = document.createElement("script");
            spt.setAttribute("id", "MathJax-script");
            spt.setAttribute("async", true);
            spt.setAttribute("src", "../third/tex-chtml.js");
            document.body.append(spt);

            if (oldOnLoad) {
                oldOnLoad();
            }
        };
    </script>
</body>

</html>